(self.webpackChunklangua=self.webpackChunklangua||[]).push([[54],{2283:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return S}});var n=a(7294),s=a(2691),r=a(5900),i=a.n(r),l=a(3721),o=a(5167),d=a(9668),u=a(9154),m=a(7340),c=a(9663),f=function(e){var t=e.styles,a=e.data,s=e.change,r=n.createRef(),f=a.lexemes.map((function(e,a){return n.createElement("div",{key:a,className:t.derivRow},n.createElement("input",{type:"text",id:"lw"+a,name:"lw"+a,className:t.lexemeInput,value:e.lexeme,onChange:s,"aria-label":"Word for lexeme "+a}),n.createElement("input",{type:"text",id:"ld"+a,name:"ld"+a,className:t.lexemeDefInput,value:e.definition,onChange:s,"aria-label":"Gloss for lexeme "+a}),n.createElement("div",{className:t.clearButton},n.createElement(o.Z,{id:"lc"+a,onClick:s,ver:"danger",small:!0,type:"button","aria-label":"Delete lexeme "+a},"Delete")))})),v=a.derivations.map((function(e,a){return n.createElement("div",{key:a,className:t.derivRow},n.createElement("input",{type:"text",id:"da"+a,name:"da"+a,className:t.derivationInput,value:e.derivation,onChange:s,"aria-label":"Affix "+a}),n.createElement("input",{type:"text",id:"dl"+a,name:"dl"+a,className:t.derivationGlossInput,value:e.gloss,onChange:s,"aria-label":"Gloss for affix "+a}),n.createElement("input",{type:"text",id:"dd"+a,name:"dd"+a,className:t.derivationDefInput,value:e.definition,onChange:s,"aria-label":"Definition for affix "+a}),n.createElement("div",{className:t.clearButton},n.createElement(o.Z,{id:"dc"+a,onClick:s,ver:"danger",small:!0,type:"button","aria-label":"Delete lexeme "+a},"Delete")))})),p=function(e){return n.createElement("div",{className:t.addingRow},n.createElement(o.Z,{onClick:s,id:e+"Add",ver:"success",small:!0,type:"button"},"Add"))};return n.createElement(l.Z,{name:"deriv-form"},n.createElement("div",{className:i()(t.lexemes,c.Z.part)},n.createElement("h5",{className:c.Z.sectionTitle},"Lexemes"),n.createElement("div",{className:t.derivRow},n.createElement("h6",{className:i()(t.columnLabel,t.wordLabel)},"Word"),n.createElement("h6",{className:i()(t.columnLabel,t.definitionLabel)},"Gloss")),f,p("lex")),n.createElement("div",{className:i()(t.derivations,c.Z.part)},n.createElement("h5",{className:c.Z.sectionTitle},"Derivational Affixes"),n.createElement("div",{className:t.derivRow},n.createElement("h6",{className:i()(t.columnLabel,t.affixLabel)},"Affix"),n.createElement("h6",{className:i()(t.columnLabel,t.glossLabel)},"Gloss"),n.createElement("h6",{className:i()(t.columnLabel,t.definitionLabel)},"Definition")),v,p("der")),n.createElement(d.Z,{addedClasses:c.Z.part},n.createElement(u.Z,{side:"left"},n.createElement(m.Z,null,n.createElement(o.Z,{type:"submit",ver:"neutral",onClick:s},"Derive")),n.createElement(m.Z,null,n.createElement("label",{htmlFor:"words"},"number of words to derive:"),n.createElement("input",{type:"number",id:"words",name:"words",min:"1",max:"9999",className:t.wordsInput,value:a.words,onChange:s})),n.createElement(m.Z,null,n.createElement("label",{htmlFor:"type"},"output type:"),n.createElement("select",{id:"type",name:"type",value:a.type,onChange:s},n.createElement("option",{value:"any"},"any base, any derivation"),n.createElement("option",{value:"single base"},"single base"),n.createElement("option",{value:"single derivation"},"single derivation")))),n.createElement(u.Z,{side:"right"},n.createElement(m.Z,null,n.createElement(o.Z,{id:"save",ver:"success",onClick:s,type:"button"},"Save")),n.createElement(m.Z,null,n.createElement(o.Z,{id:"open",onClick:function(e){e.preventDefault(),r.current.value="",r.current.click()},type:"button"},"Open"),n.createElement("input",{id:"file",name:"file",className:c.Z.hidden,type:"file",ref:r,onChange:s})))))},v=a(7673),p=a(5015),g=function(e){var t,a,s=e.styles,r=e.results,l=(0,n.useState)(null),o=l[0],d=l[1],u=function(e,t,a){return"affix"===e?n.createElement("div",{className:s.outputBox},n.createElement("p",{className:s.term},t.derivation),n.createElement("p",{className:i()(s.affixGloss,s.gloss,a===o?s.hoveredGloss:null),onMouseOver:function(){return m(a)},onMouseOut:function(){return c(a)}},t.gloss)):"lexeme"===e?n.createElement("div",{className:s.outputBox},n.createElement("p",{className:s.term},t.lexeme),n.createElement("p",{className:i()(s.lexGloss,s.gloss)},t.definition)):"error"===e?n.createElement("div",{className:s.outputBox},n.createElement("p",{className:i()(p.Z.error,s.gloss)},t)):null},m=function(e){d(e)},c=function(e){d(null)};return n.createElement(v.Z,null,n.createElement("div",{className:s.output},r&&r.newWords.length?r.newWords.map((function(e,t){return n.createElement("div",{key:t,className:i()(s.derivRow,s.outputRow)},n.createElement("div",{className:i()(s.outputBox,s.rowNumber)},t+1,"."),n.createElement("div",null,n.createElement("div",{className:i()(s.derivRow,s.outputRow)},e.prefix?u("affix",e.prefix,t):null,e.lexeme?u("lexeme",e.lexeme,t):null,e.suffix?u("affix",e.suffix,t):null,e.error?u("error",e.error,t):null),n.createElement("p",{className:i()(s.affixDef,t===o?s.hoveredDef:null)},e.prefix?e.prefix.definition:e.suffix?e.suffix.definition:"")))})):null),n.createElement("div",{className:p.Z.stats},n.createElement("p",{className:p.Z.statsText},(t=0,a=0,r&&(t=r.newWords.length.toLocaleString(),a=r.possible.toLocaleString()),"words: "+t+"; maximum derivations possible: "+a))))},h=a(2591),x=a(3086),b=a.n(x),N=a(6649),y=a(570),w=new(function(){function e(){this.item="deriv",this.getData=this.getData.bind(this),this.save=this.save.bind(this),this.open=this.open.bind(this),this.setStorage=this.setStorage.bind(this),this.add=this.add.bind(this),this.clear=this.clear.bind(this),this.changeInput=this.changeInput.bind(this),this.derive=this.derive.bind(this)}var t=e.prototype;return t.getData=function(){return N.Z.getData(this.item)},t.setStorage=function(e){N.Z.setStorage(e,this.item)},t.save=function(e){y.Z.save(e,this.item)},t.open=function(e,t){var a,n=this;window.FileReader?y.Z.openFile(e,(function(s){if(e.name.endsWith(".lngd")){var r=b()({lexeme:String,definition:String}),i=b()({derivation:String,gloss:String,definition:String}),l=b()({words:Number,type:["any","single base","single derivation"],lexemes:Array.of(r),derivations:Array.of(i)}),o=JSON.parse(s);o.results&&(o.results.words=+o.results.words),l(o)?(h.Am.success("Data loaded from "+e.name+".",{autoClose:5e3,className:"toast-opened",bodyClassName:"toast-opened-body",progressClassName:"toast-opened-progress"}),n.setStorage(o),a=o):(h.Am.warn("The content of "+e.name+" is invalid.",{autoClose:5e3,className:"toast-unopened",bodyClassName:"toast-unopened-body",progressClassName:"toast-unopened-progress"}),console.error(l.errors(o)),a=!1)}else h.Am.warn("Wrong filetype selected.",{autoClose:5e3,className:"toast-unopened",bodyClassName:"toast-unopened-body",progressClassName:"toast-unopened-progress"}),a=!1;t(a)})):(h.Am.warn("Your browser is unable to open files.",{autoClose:5e3,className:"toast-unopened",bodyClassName:"toast-unopened-body",progressClassName:"toast-unopened-progress"}),t(a=!1))},t.add=function(e,t){var a=JSON.parse(JSON.stringify(e));return"lex"===t?a.lexemes.push({lexeme:"",definition:""}):a.derivations.push({derivation:"",gloss:"",definition:""}),a},t.clear=function(e,t,a){var n=JSON.parse(JSON.stringify(e));return"l"===a?n.lexemes.splice(t,1):n.derivations.splice(t,1),n},t.changeInput=function(e,t,a,n){var s=JSON.parse(JSON.stringify(e));switch(a){case"lw":s.lexemes[t].lexeme=n;break;case"ld":s.lexemes[t].definition=n;break;case"da":s.derivations[t].derivation=n;break;case"dl":s.derivations[t].gloss=n;break;case"dd":s.derivations[t].definition=n}return s},t.wordNumChange=function(e,t){if((t=+t)<1?t=1:t>9999&&(t=9999),t>0&&t<1e4){var a=JSON.parse(JSON.stringify(e));return a.words=t,a}return!1},t.derive=function(e){var t,a=JSON.parse(JSON.stringify(e)),n="single base"===(t=a.type)?a.derivations.length:"single derivation"===t?a.lexemes.length:a.lexemes.length*a.derivations.length,s=a.words>n?n:a.words,r=a.derivations.map((function(e){if(e.derivation=e.derivation.replace(/-+/g,"-"),/-/.test(e.derivation)){if(1===e.derivation.match(/-/g).length){if(/-$/.test(e.derivation))return e.gloss=e.gloss+"-",{prefix:e};if(/^-/.test(e.derivation))return e.gloss="-"+e.gloss,{suffix:e};var t=e.derivation.split(/-/),a=JSON.parse(JSON.stringify(e)),n=JSON.parse(JSON.stringify(e));return a.derivation=t[0]+"-",a.gloss=a.gloss+"-",n.derivation="-"+t[1],n.gloss="-"+n.gloss,{prefix:a,suffix:n}}return{error:"The affix "+e.derivation+" contains too many hyphens."}}return{error:"The affix "+e.derivation+" is missing a hyphen."}})),i=function(e,t){return{prefix:t.prefix,lexeme:e,suffix:t.suffix,error:t.error}};return"single base"===a.type?{newWords:function(){for(var e=a.lexemes[Math.floor(Math.random()*a.lexemes.length)],t=[];s>0;){var n=Math.floor(Math.random()*r.length),l=r[n];t.push(i(e,l)),r.splice(n,1),s--}return t}(),possible:n}:"single derivation"===a.type?{newWords:function(){for(var e=r[Math.floor(Math.random()*r.length)],t=[];s>0;){var n=Math.floor(Math.random()*a.lexemes.length),l=a.lexemes[n];t.push(i(l,e)),a.lexemes.splice(n,1),s--}return t}(),possible:n}:{newWords:function(){for(var e=[],t=function t(){for(var n=a.lexemes[Math.floor(Math.random()*a.lexemes.length)],s=r[Math.floor(Math.random()*r.length)],l=i(n,s),o=!0,d=0;d<e.length;d++)if(JSON.stringify(l)===JSON.stringify(e[d])){o=!1;break}return o||(l=t()),l};s>0;)e.push(t()),s--;return e}(),possible:n}},e}()),E={wordsInput:"deriv-module--words-input--3_pLI",derivRow:"deriv-module--deriv-row--1FFeo",addingRow:"deriv-module--adding-row--sX2At",outputRow:"deriv-module--output-row--3vdh4",columnLabel:"deriv-module--column-label--35gi5",lexemeInput:"deriv-module--lexeme-input--16dBy",wordLabel:"deriv-module--word-label--1lbrW",derivationGlossInput:"deriv-module--derivation-gloss-input--2GHha",glossLabel:"deriv-module--gloss-label--1Z2GZ",lexemeDefInput:"deriv-module--lexeme-def-input--2xyWj",definitionLabel:"deriv-module--definition-label--NOxBT",derivationDefInput:"deriv-module--derivation-def-input--3ZtSX",derivationInput:"deriv-module--derivation-input--22_N2",affixLabel:"deriv-module--affix-label--1h9ZC",outputBox:"deriv-module--output-box--1WN2x",rowNumber:"deriv-module--row-number--1EVu1",term:"deriv-module--term--MwRlp",gloss:"deriv-module--gloss--2Y62Y",lexGloss:"deriv-module--lex-gloss--2o52m",affixGloss:"deriv-module--affix-gloss--EICTR",affixDef:"deriv-module--affix-def--xtHjE",hoveredGloss:"deriv-module--hovered-gloss--3Fqw9",hoveredDef:"deriv-module--hovered-def--Ozs0j"},S=function(e){var t,a,r,i,l=null===(t=e.data)||void 0===t||null===(a=t.site)||void 0===a||null===(r=a.siteMetadata)||void 0===r||null===(i=r.toolInfo)||void 0===i?void 0:i.deriv,o=(0,n.useState)(w.getData().words),d=o[0],u=o[1],m=(0,n.useState)(w.getData().type),c=m[0],v=m[1],p=(0,n.useState)(w.getData().lexemes),h=p[0],x=p[1],b=(0,n.useState)(w.getData().derivations),N=b[0],y=b[1],S=(0,n.useState)(w.getData().results),Z=S[0],C=S[1];return n.createElement(s.Z,{toolInfo:l},n.createElement(f,{styles:E,data:{words:d,type:c,lexemes:h,derivations:N},change:function(e){var t={words:d,type:c,lexemes:h,derivations:N,results:Z};if("BUTTON"===e.target.tagName){if(e.preventDefault(),"submit"===e.target.type){var a=w.derive(t);t.results=a,C(a),w.setStorage(t)}else if("save"===e.target.id)w.save(t);else if("Add"===e.target.id.slice(3)){var n=e.target.id.slice(0,3),s=w.add(t,n);x(s.lexemes),y(s.derivations)}else if("c"===e.target.id.slice(1,2)){var r=e.target.id.slice(2),i=e.target.id.slice(0,1),l=w.clear(t,r,i);x(l.lexemes),y(l.derivations)}}else if("file"===e.target.type){e.preventDefault();var o=e.target.files[0];w.open(o,(function(e){e&&(u(e.words),v(e.type),x(e.lexemes),y(e.derivations),C(e.results))}))}else{var m=e.target.id.slice(2),f=e.target.id.slice(0,2),p=e.target.value,g=e.target.name;if("lw"===f||"ld"===f||"da"===f||"dl"===f||"dd"===f){var b=w.changeInput(t,m,f,p);b&&(u(b.words),v(b.type),x(b.lexemes),y(b.derivations),C(b.results))}else if("words"===g){var E=w.wordNumChange(t,p);E&&(u(E.words),v(E.type),x(E.lexemes),y(E.derivations),C(E.results))}else"type"===g&&v(p)}}}),n.createElement(g,{styles:E,results:Z}))}}}]);
//# sourceMappingURL=component---src-pages-deriv-index-js-c218a0d0471e83a42441.js.map