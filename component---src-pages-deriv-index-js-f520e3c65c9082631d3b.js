(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{Nz3g:function(e,t,s){e.exports={wordsInput:"deriv-module--words-input--2bmq4",derivRow:"deriv-module--deriv-row--1yw_v",addingRow:"deriv-module--adding-row--3Cxlq",outputRow:"deriv-module--output-row--2uhRT",columnLabel:"deriv-module--column-label--2sxe8",lexemeInput:"deriv-module--lexeme-input--1q6iO",wordLabel:"deriv-module--word-label--1_VEw",derivationGlossInput:"deriv-module--derivation-gloss-input--3lpct",glossLabel:"deriv-module--gloss-label--3QhJP",lexemeDefInput:"deriv-module--lexeme-def-input--1PyjP",definitionLabel:"deriv-module--definition-label--3ocQV",derivationDefInput:"deriv-module--derivation-def-input--34fIT",derivationInput:"deriv-module--derivation-input--37Q2P",affixLabel:"deriv-module--affix-label--2g9m4",outputBox:"deriv-module--output-box--hM7ft",rowNumber:"deriv-module--row-number--1HlZQ",term:"deriv-module--term--35vHL",gloss:"deriv-module--gloss--1d-oE",lexGloss:"deriv-module--lex-gloss--1hQV4",affixGloss:"deriv-module--affix-gloss--3b5ra",affixDef:"deriv-module--affix-def--2NkCo",hoveredGloss:"deriv-module--hovered-gloss--1tYhZ",hoveredDef:"deriv-module--hovered-def--1n_qF"}},Tfet:function(e,t,s){"use strict";s.r(t),s.d(t,"PureDeriv",(function(){return L}));var i=s("nKUr"),a=s("q1tI"),n=s.n(a),r=s("Wbzz"),l=s("NYH8"),o=s("TSYQ"),d=s.n(o),c=s("wYtL"),u=s("FT44"),f=s("U8k4"),m=s("II/Z"),v=s("UvGF"),x=s("U29B"),h=s.n(x),p=function(e){var t=e.styles,s=e.data,a=e.change,r=n.a.createRef(),l=s.lexemes.map((function(e,s){return Object(i.jsxs)("div",{className:t.derivRow,children:[Object(i.jsx)("input",{type:"text",id:"lw"+s,name:"lw"+s,className:t.lexemeInput,value:e.lexeme,onChange:a,"aria-label":"Word for lexeme "+s}),Object(i.jsx)("input",{type:"text",id:"ld"+s,name:"ld"+s,className:t.lexemeDefInput,value:e.definition,onChange:a,"aria-label":"Gloss for lexeme "+s}),Object(i.jsx)("div",{className:t.clearButton,children:Object(i.jsx)(u.a,{id:"lc"+s,onClick:a,ver:"danger",small:!0,type:"button","aria-label":"Delete lexeme "+s,children:"Delete"})})]},s)})),o=s.derivations.map((function(e,s){return Object(i.jsxs)("div",{className:t.derivRow,children:[Object(i.jsx)("input",{type:"text",id:"da"+s,name:"da"+s,className:t.derivationInput,value:e.derivation,onChange:a,"aria-label":"Affix "+s}),Object(i.jsx)("input",{type:"text",id:"dl"+s,name:"dl"+s,className:t.derivationGlossInput,value:e.gloss,onChange:a,"aria-label":"Gloss for affix "+s}),Object(i.jsx)("input",{type:"text",id:"dd"+s,name:"dd"+s,className:t.derivationDefInput,value:e.definition,onChange:a,"aria-label":"Definition for affix "+s}),Object(i.jsx)("div",{className:t.clearButton,children:Object(i.jsx)(u.a,{id:"dc"+s,onClick:a,ver:"danger",small:!0,type:"button","aria-label":"Delete lexeme "+s,children:"Delete"})})]},s)})),x=function(e){return Object(i.jsx)("div",{className:t.addingRow,children:Object(i.jsx)(u.a,{onClick:a,id:e+"Add",ver:"success",small:!0,type:"button",children:"Add"})})};return Object(i.jsxs)(c.a,{name:"deriv-form",children:[Object(i.jsxs)("div",{className:d()(t.lexemes,h.a.part),children:[Object(i.jsx)("h5",{className:h.a.sectionTitle,children:"Lexemes"}),Object(i.jsxs)("div",{className:t.derivRow,children:[Object(i.jsx)("h6",{className:d()(t.columnLabel,t.wordLabel),children:"Word"}),Object(i.jsx)("h6",{className:d()(t.columnLabel,t.definitionLabel),children:"Gloss"})]}),l,x("lex")]}),Object(i.jsxs)("div",{className:d()(t.derivations,h.a.part),children:[Object(i.jsx)("h5",{className:h.a.sectionTitle,children:"Derivational Affixes"}),Object(i.jsxs)("div",{className:t.derivRow,children:[Object(i.jsx)("h6",{className:d()(t.columnLabel,t.affixLabel),children:"Affix"}),Object(i.jsx)("h6",{className:d()(t.columnLabel,t.glossLabel),children:"Gloss"}),Object(i.jsx)("h6",{className:d()(t.columnLabel,t.definitionLabel),children:"Definition"})]}),o,x("der")]}),Object(i.jsxs)(f.a,{addedClasses:h.a.part,children:[Object(i.jsxs)(m.a,{side:"left",children:[Object(i.jsx)(v.a,{children:Object(i.jsx)(u.a,{type:"submit",ver:"neutral",onClick:a,children:"Derive"})}),Object(i.jsxs)(v.a,{children:[Object(i.jsx)("label",{htmlFor:"words",children:"number of words to derive:"}),Object(i.jsx)("input",{type:"number",id:"words",name:"words",min:"1",max:"9999",className:t.wordsInput,value:s.words,onChange:a})]}),Object(i.jsxs)(v.a,{children:[Object(i.jsx)("label",{htmlFor:"type",children:"output type:"}),Object(i.jsxs)("select",{id:"type",name:"type",value:s.type,onChange:a,children:[Object(i.jsx)("option",{value:"any",children:"any base, any derivation"}),Object(i.jsx)("option",{value:"single base",children:"single base"}),Object(i.jsx)("option",{value:"single derivation",children:"single derivation"})]})]})]}),Object(i.jsxs)(m.a,{side:"right",children:[Object(i.jsx)(v.a,{children:Object(i.jsx)(u.a,{id:"save",ver:"success",onClick:a,type:"button",children:"Save"})}),Object(i.jsxs)(v.a,{children:[Object(i.jsx)(u.a,{id:"open",onClick:function(e){e.preventDefault(),r.current.value="",r.current.click()},type:"button",children:"Open"}),Object(i.jsx)("input",{id:"file",name:"file",className:h.a.hidden,type:"file",ref:r,onChange:a})]})]})]})]})},b=s("49EY"),j=s("X3Hw"),g=s.n(j),O=function(e){var t,s,n=e.styles,r=e.results,l=Object(a.useState)(null),o=l[0],c=l[1],u=function(e,t,s){return"affix"===e?Object(i.jsxs)("div",{className:n.outputBox,children:[Object(i.jsx)("p",{className:n.term,children:t.derivation}),Object(i.jsx)("p",{className:d()(n.affixGloss,n.gloss,s===o?n.hoveredGloss:null),onMouseOver:function(){return f(s)},onMouseOut:function(){return m(s)},children:t.gloss})]}):"lexeme"===e?Object(i.jsxs)("div",{className:n.outputBox,children:[Object(i.jsx)("p",{className:n.term,children:t.lexeme}),Object(i.jsx)("p",{className:d()(n.lexGloss,n.gloss),children:t.definition})]}):"error"===e?Object(i.jsx)("div",{className:n.outputBox,children:Object(i.jsx)("p",{className:d()(g.a.error,n.gloss),children:t})}):null},f=function(e){c(e)},m=function(e){c(null)};return Object(i.jsxs)(b.a,{children:[Object(i.jsx)("div",{className:n.output,children:r&&r.newWords.length?r.newWords.map((function(e,t){return Object(i.jsxs)("div",{className:d()(n.derivRow,n.outputRow),children:[Object(i.jsxs)("div",{className:d()(n.outputBox,n.rowNumber),children:[t+1,"."]}),Object(i.jsxs)("div",{children:[Object(i.jsxs)("div",{className:d()(n.derivRow,n.outputRow),children:[e.prefix?u("affix",e.prefix,t):null,e.lexeme?u("lexeme",e.lexeme,t):null,e.suffix?u("affix",e.suffix,t):null,e.error?u("error",e.error,t):null]}),Object(i.jsx)("p",{className:d()(n.affixDef,t===o?n.hoveredDef:null),children:e.prefix?e.prefix.definition:e.suffix?e.suffix.definition:""})]})]},t)})):null}),Object(i.jsx)("div",{className:g.a.stats,children:Object(i.jsx)("p",{className:g.a.statsText,children:(t=0,s=0,r&&(t=r.newWords.length.toLocaleString(),s=r.possible.toLocaleString()),"words: "+t+"; maximum derivations possible: "+s)})})]})},N=s("FGyW"),w=s("NT95"),y=s.n(w),S=s("SMIz"),C=s("C713"),D=new(function(){function e(){this.item="deriv",this.getData=this.getData.bind(this),this.save=this.save.bind(this),this.open=this.open.bind(this),this.setStorage=this.setStorage.bind(this),this.add=this.add.bind(this),this.clear=this.clear.bind(this),this.changeInput=this.changeInput.bind(this),this.derive=this.derive.bind(this)}var t=e.prototype;return t.getData=function(){return S.a.getData(this.item)},t.setStorage=function(e){S.a.setStorage(e,this.item)},t.save=function(e){C.a.save(e,this.item)},t.open=function(e,t){var s,i=this;window.FileReader?C.a.openFile(e,(function(a){if(e.name.endsWith(".lngd")){var n=y()({lexeme:String,definition:String}),r=y()({derivation:String,gloss:String,definition:String}),l=y()({words:Number,type:["any","single base","single derivation"],lexemes:Array.of(n),derivations:Array.of(r)}),o=JSON.parse(a);o.results&&(o.results.words=+o.results.words),l(o)?(N.c.success("Data loaded from "+e.name+".",{autoClose:5e3,className:"toast-opened",bodyClassName:"toast-opened-body",progressClassName:"toast-opened-progress"}),i.setStorage(o),s=o):(N.c.warn("The content of "+e.name+" is invalid.",{autoClose:5e3,className:"toast-unopened",bodyClassName:"toast-unopened-body",progressClassName:"toast-unopened-progress"}),console.error(l.errors(o)),s=!1)}else N.c.warn("Wrong filetype selected.",{autoClose:5e3,className:"toast-unopened",bodyClassName:"toast-unopened-body",progressClassName:"toast-unopened-progress"}),s=!1;t(s)})):(N.c.warn("Your browser is unable to open files.",{autoClose:5e3,className:"toast-unopened",bodyClassName:"toast-unopened-body",progressClassName:"toast-unopened-progress"}),t(s=!1))},t.add=function(e,t){var s=JSON.parse(JSON.stringify(e));return"lex"===t?s.lexemes.push({lexeme:"",definition:""}):s.derivations.push({derivation:"",gloss:"",definition:""}),s},t.clear=function(e,t,s){var i=JSON.parse(JSON.stringify(e));return"l"===s?i.lexemes.splice(t,1):i.derivations.splice(t,1),i},t.changeInput=function(e,t,s,i){var a=JSON.parse(JSON.stringify(e));switch(s){case"lw":a.lexemes[t].lexeme=i;break;case"ld":a.lexemes[t].definition=i;break;case"da":a.derivations[t].derivation=i;break;case"dl":a.derivations[t].gloss=i;break;case"dd":a.derivations[t].definition=i}return a},t.wordNumChange=function(e,t){if((t=+t)<1?t=1:t>9999&&(t=9999),t>0&&t<1e4){var s=JSON.parse(JSON.stringify(e));return s.words=t,s}return!1},t.derive=function(e){var t,s=JSON.parse(JSON.stringify(e)),i="single base"===(t=s.type)?s.derivations.length:"single derivation"===t?s.lexemes.length:s.lexemes.length*s.derivations.length,a=s.words>i?i:s.words,n=s.derivations.map((function(e){if(e.derivation=e.derivation.replace(/-+/g,"-"),/-/.test(e.derivation)){if(1===e.derivation.match(/-/g).length){if(/-$/.test(e.derivation))return e.gloss=e.gloss+"-",{prefix:e};if(/^-/.test(e.derivation))return e.gloss="-"+e.gloss,{suffix:e};var t=e.derivation.split(/-/),s=JSON.parse(JSON.stringify(e)),i=JSON.parse(JSON.stringify(e));return s.derivation=t[0]+"-",s.gloss=s.gloss+"-",i.derivation="-"+t[1],i.gloss="-"+i.gloss,{prefix:s,suffix:i}}return{error:"The affix "+e.derivation+" contains too many hyphens."}}return{error:"The affix "+e.derivation+" is missing a hyphen."}})),r=function(e,t){return{prefix:t.prefix,lexeme:e,suffix:t.suffix,error:t.error}};return"single base"===s.type?{newWords:function(){for(var e=s.lexemes[Math.floor(Math.random()*s.lexemes.length)],t=[];a>0;){var i=Math.floor(Math.random()*n.length),l=n[i];t.push(r(e,l)),n.splice(i,1),a--}return t}(),possible:i}:"single derivation"===s.type?{newWords:function(){for(var e=n[Math.floor(Math.random()*n.length)],t=[];a>0;){var i=Math.floor(Math.random()*s.lexemes.length),l=s.lexemes[i];t.push(r(l,e)),s.lexemes.splice(i,1),a--}return t}(),possible:i}:{newWords:function(){for(var e=[],t=function t(){for(var i=s.lexemes[Math.floor(Math.random()*s.lexemes.length)],a=n[Math.floor(Math.random()*n.length)],l=r(i,a),o=!0,d=0;d<e.length;d++)if(JSON.stringify(l)===JSON.stringify(e[d])){o=!1;break}return o||(l=t()),l};a>0;)e.push(t()),a--;return e}(),possible:i}},e}()),I=s("Nz3g"),J=s.n(I),L=function(e){var t,s,n,r=e.data,o=null==r||null===(t=r.site)||void 0===t||null===(s=t.siteMetadata)||void 0===s||null===(n=s.toolInfo)||void 0===n?void 0:n.deriv,d=Object(a.useState)(D.getData().words),c=d[0],u=d[1],f=Object(a.useState)(D.getData().type),m=f[0],v=f[1],x=Object(a.useState)(D.getData().lexemes),h=x[0],b=x[1],j=Object(a.useState)(D.getData().derivations),g=j[0],N=j[1],w=Object(a.useState)(D.getData().results),y=w[0],S=w[1];return Object(i.jsxs)(l.a,{toolInfo:o,children:[Object(i.jsx)(p,{styles:J.a,data:{words:c,type:m,lexemes:h,derivations:g},change:function(e){var t={words:c,type:m,lexemes:h,derivations:g,results:y};if("BUTTON"===e.target.tagName){if(e.preventDefault(),"submit"===e.target.type){var s=D.derive(t);t.results=s,S(s),D.setStorage(t)}else if("save"===e.target.id)D.save(t);else if("Add"===e.target.id.slice(3)){var i=e.target.id.slice(0,3),a=D.add(t,i);b(a.lexemes),N(a.derivations)}else if("c"===e.target.id.slice(1,2)){var n=e.target.id.slice(2),r=e.target.id.slice(0,1),l=D.clear(t,n,r);b(l.lexemes),N(l.derivations)}}else if("file"===e.target.type){e.preventDefault();var o=e.target.files[0];D.open(o,(function(e){e&&(u(e.words),v(e.type),b(e.lexemes),N(e.derivations),S(e.results))}))}else{var d=e.target.id.slice(2),f=e.target.id.slice(0,2),x=e.target.value,p=e.target.name;if("lw"===f||"ld"===f||"da"===f||"dl"===f||"dd"===f){var j=D.changeInput(t,d,f,x);j&&(u(j.words),v(j.type),b(j.lexemes),N(j.derivations),S(j.results))}else if("words"===p){var O=D.wordNumChange(t,x);O&&(u(O.words),v(O.type),b(O.lexemes),N(O.derivations),S(O.results))}else"type"===p&&v(x)}}}),Object(i.jsx)(O,{styles:J.a,results:y})]})};t.default=function(e){var t=Object(r.useStaticQuery)("3097149197");return Object(i.jsx)(L,Object.assign({},e,{data:t}))}}}]);
//# sourceMappingURL=component---src-pages-deriv-index-js-f520e3c65c9082631d3b.js.map