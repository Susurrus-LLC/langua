(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{Nz3g:function(e,t,a){e.exports={wordsInput:"deriv-module--words-input--2bmq4",derivRow:"deriv-module--deriv-row--1yw_v",addingRow:"deriv-module--adding-row--3Cxlq",outputRow:"deriv-module--output-row--2uhRT",columnLabel:"deriv-module--column-label--2sxe8",lexemeInput:"deriv-module--lexeme-input--1q6iO",wordLabel:"deriv-module--word-label--1_VEw",derivationGlossInput:"deriv-module--derivation-gloss-input--3lpct",glossLabel:"deriv-module--gloss-label--3QhJP",lexemeDefInput:"deriv-module--lexeme-def-input--1PyjP",definitionLabel:"deriv-module--definition-label--3ocQV",derivationDefInput:"deriv-module--derivation-def-input--34fIT",derivationInput:"deriv-module--derivation-input--37Q2P",affixLabel:"deriv-module--affix-label--2g9m4",outputBox:"deriv-module--output-box--hM7ft",rowNumber:"deriv-module--row-number--1HlZQ",term:"deriv-module--term--35vHL",gloss:"deriv-module--gloss--1d-oE",lexGloss:"deriv-module--lex-gloss--1hQV4",affixGloss:"deriv-module--affix-gloss--3b5ra",affixDef:"deriv-module--affix-def--2NkCo",hoveredGloss:"deriv-module--hovered-gloss--1tYhZ",hoveredDef:"deriv-module--hovered-def--1n_qF"}},Tfet:function(e,t,a){"use strict";a.r(t),a.d(t,"PureDeriv",(function(){return J}));var n=a("q1tI"),r=a.n(n),s=a("Wbzz"),i=a("NYH8"),l=a("TSYQ"),o=a.n(l),d=a("wYtL"),u=a("FT44"),m=a("U8k4"),c=a("II/Z"),f=a("UvGF"),v=a("U29B"),p=a.n(v),g=function(e){var t=e.styles,a=e.data,n=e.change,s=r.a.createRef(),i=a.lexemes.map((function(e,a){return r.a.createElement("div",{key:a,className:t.derivRow},r.a.createElement("input",{type:"text",id:"lw"+a,name:"lw"+a,className:t.lexemeInput,value:e.lexeme,onChange:n,"aria-label":"Word for lexeme "+a}),r.a.createElement("input",{type:"text",id:"ld"+a,name:"ld"+a,className:t.lexemeDefInput,value:e.definition,onChange:n,"aria-label":"Gloss for lexeme "+a}),r.a.createElement("div",{className:t.clearButton},r.a.createElement(u.a,{id:"lc"+a,onClick:n,ver:"danger",small:!0,type:"button","aria-label":"Delete lexeme "+a},"Delete")))})),l=a.derivations.map((function(e,a){return r.a.createElement("div",{key:a,className:t.derivRow},r.a.createElement("input",{type:"text",id:"da"+a,name:"da"+a,className:t.derivationInput,value:e.derivation,onChange:n,"aria-label":"Affix "+a}),r.a.createElement("input",{type:"text",id:"dl"+a,name:"dl"+a,className:t.derivationGlossInput,value:e.gloss,onChange:n,"aria-label":"Gloss for affix "+a}),r.a.createElement("input",{type:"text",id:"dd"+a,name:"dd"+a,className:t.derivationDefInput,value:e.definition,onChange:n,"aria-label":"Definition for affix "+a}),r.a.createElement("div",{className:t.clearButton},r.a.createElement(u.a,{id:"dc"+a,onClick:n,ver:"danger",small:!0,type:"button","aria-label":"Delete lexeme "+a},"Delete")))})),v=function(e){return r.a.createElement("div",{className:t.addingRow},r.a.createElement(u.a,{onClick:n,id:e+"Add",ver:"success",small:!0,type:"button"},"Add"))};return r.a.createElement(d.a,{name:"deriv-form"},r.a.createElement("div",{className:o()(t.lexemes,p.a.part)},r.a.createElement("h5",{className:p.a.sectionTitle},"Lexemes"),r.a.createElement("div",{className:t.derivRow},r.a.createElement("h6",{className:o()(t.columnLabel,t.wordLabel)},"Word"),r.a.createElement("h6",{className:o()(t.columnLabel,t.definitionLabel)},"Gloss")),i,v("lex")),r.a.createElement("div",{className:o()(t.derivations,p.a.part)},r.a.createElement("h5",{className:p.a.sectionTitle},"Derivational Affixes"),r.a.createElement("div",{className:t.derivRow},r.a.createElement("h6",{className:o()(t.columnLabel,t.affixLabel)},"Affix"),r.a.createElement("h6",{className:o()(t.columnLabel,t.glossLabel)},"Gloss"),r.a.createElement("h6",{className:o()(t.columnLabel,t.definitionLabel)},"Definition")),l,v("der")),r.a.createElement(m.a,{addedClasses:p.a.part},r.a.createElement(c.a,{side:"left"},r.a.createElement(f.a,null,r.a.createElement(u.a,{type:"submit",ver:"neutral",onClick:n},"Derive")),r.a.createElement(f.a,null,r.a.createElement("label",{htmlFor:"words"},"number of words to derive:"),r.a.createElement("input",{type:"number",id:"words",name:"words",min:"1",max:"9999",className:t.wordsInput,value:a.words,onChange:n})),r.a.createElement(f.a,null,r.a.createElement("label",{htmlFor:"type"},"output type:"),r.a.createElement("select",{id:"type",name:"type",value:a.type,onChange:n},r.a.createElement("option",{value:"any"},"any base, any derivation"),r.a.createElement("option",{value:"single base"},"single base"),r.a.createElement("option",{value:"single derivation"},"single derivation")))),r.a.createElement(c.a,{side:"right"},r.a.createElement(f.a,null,r.a.createElement(u.a,{id:"save",ver:"success",onClick:n,type:"button"},"Save")),r.a.createElement(f.a,null,r.a.createElement(u.a,{id:"open",onClick:function(e){e.preventDefault(),s.current.value="",s.current.click()},type:"button"},"Open"),r.a.createElement("input",{id:"file",name:"file",className:p.a.hidden,type:"file",ref:s,onChange:n})))))},h=a("49EY"),x=a("X3Hw"),b=a.n(x),N=function(e){var t,a,s=e.styles,i=e.results,l=Object(n.useState)(null),d=l[0],u=l[1],m=function(e,t,a){return"affix"===e?r.a.createElement("div",{className:s.outputBox},r.a.createElement("p",{className:s.term},t.derivation),r.a.createElement("p",{className:o()(s.affixGloss,s.gloss,a===d?s.hoveredGloss:null),onMouseOver:function(){return c(a)},onMouseOut:function(){return f(a)}},t.gloss)):"lexeme"===e?r.a.createElement("div",{className:s.outputBox},r.a.createElement("p",{className:s.term},t.lexeme),r.a.createElement("p",{className:o()(s.lexGloss,s.gloss)},t.definition)):"error"===e?r.a.createElement("div",{className:s.outputBox},r.a.createElement("p",{className:o()(b.a.error,s.gloss)},t)):null},c=function(e){u(e)},f=function(e){u(null)};return r.a.createElement(h.a,null,r.a.createElement("div",{className:s.output},i&&i.newWords.length?i.newWords.map((function(e,t){return r.a.createElement("div",{key:t,className:o()(s.derivRow,s.outputRow)},r.a.createElement("div",{className:o()(s.outputBox,s.rowNumber)},t+1,"."),r.a.createElement("div",null,r.a.createElement("div",{className:o()(s.derivRow,s.outputRow)},e.prefix?m("affix",e.prefix,t):null,e.lexeme?m("lexeme",e.lexeme,t):null,e.suffix?m("affix",e.suffix,t):null,e.error?m("error",e.error,t):null),r.a.createElement("p",{className:o()(s.affixDef,t===d?s.hoveredDef:null)},e.prefix?e.prefix.definition:e.suffix?e.suffix.definition:"")))})):null),r.a.createElement("div",{className:b.a.stats},r.a.createElement("p",{className:b.a.statsText},(t=0,a=0,i&&(t=i.newWords.length.toLocaleString(),a=i.possible.toLocaleString()),"words: "+t+"; maximum derivations possible: "+a))))},w=a("FGyW"),y=a("NT95"),E=a.n(y),S=a("SMIz"),C=a("C713"),D=new(function(){function e(){this.item="deriv",this.getData=this.getData.bind(this),this.save=this.save.bind(this),this.open=this.open.bind(this),this.setStorage=this.setStorage.bind(this),this.add=this.add.bind(this),this.clear=this.clear.bind(this),this.changeInput=this.changeInput.bind(this),this.derive=this.derive.bind(this)}var t=e.prototype;return t.getData=function(){return S.a.getData(this.item)},t.setStorage=function(e){S.a.setStorage(e,this.item)},t.save=function(e){C.a.save(e,this.item)},t.open=function(e,t){var a,n=this;window.FileReader?C.a.openFile(e,(function(r){if(e.name.endsWith(".lngd")){var s=E()({lexeme:String,definition:String}),i=E()({derivation:String,gloss:String,definition:String}),l=E()({words:Number,type:["any","single base","single derivation"],lexemes:Array.of(s),derivations:Array.of(i)}),o=JSON.parse(r);o.results&&(o.results.words=+o.results.words),l(o)?(w.c.success("Data loaded from "+e.name+".",{autoClose:5e3,className:"toast-opened",bodyClassName:"toast-opened-body",progressClassName:"toast-opened-progress"}),n.setStorage(o),a=o):(w.c.info("The content of "+e.name+" is invalid.",{autoClose:5e3,className:"toast-unopened",bodyClassName:"toast-unopened-body",progressClassName:"toast-unopened-progress"}),console.error(l.errors(o)),a=!1)}else w.c.info("Wrong filetype selected.",{autoClose:5e3,className:"toast-unopened",bodyClassName:"toast-unopened-body",progressClassName:"toast-unopened-progress"}),a=!1;t(a)})):(w.c.info("Your browser is unable to open files.",{autoClose:5e3,className:"toast-unopened",bodyClassName:"toast-unopened-body",progressClassName:"toast-unopened-progress"}),t(a=!1))},t.add=function(e,t){var a=JSON.parse(JSON.stringify(e));return"lex"===t?a.lexemes.push({lexeme:"",definition:""}):a.derivations.push({derivation:"",gloss:"",definition:""}),a},t.clear=function(e,t,a){var n=JSON.parse(JSON.stringify(e));return"l"===a?n.lexemes.splice(t,1):n.derivations.splice(t,1),n},t.changeInput=function(e,t,a,n){var r=JSON.parse(JSON.stringify(e));switch(a){case"lw":r.lexemes[t].lexeme=n;break;case"ld":r.lexemes[t].definition=n;break;case"da":r.derivations[t].derivation=n;break;case"dl":r.derivations[t].gloss=n;break;case"dd":r.derivations[t].definition=n}return r},t.wordNumChange=function(e,t){if((t=+t)<1?t=1:t>9999&&(t=9999),t>0&&t<1e4){var a=JSON.parse(JSON.stringify(e));return a.words=t,a}return!1},t.derive=function(e){var t,a=JSON.parse(JSON.stringify(e)),n="single base"===(t=a.type)?a.derivations.length:"single derivation"===t?a.lexemes.length:a.lexemes.length*a.derivations.length,r=a.words>n?n:a.words,s=a.derivations.map((function(e){if(e.derivation=e.derivation.replace(/-+/g,"-"),/-/.test(e.derivation)){if(1===e.derivation.match(/-/g).length){if(/-$/.test(e.derivation))return e.gloss=e.gloss+"-",{prefix:e};if(/^-/.test(e.derivation))return e.gloss="-"+e.gloss,{suffix:e};var t=e.derivation.split(/-/),a=JSON.parse(JSON.stringify(e)),n=JSON.parse(JSON.stringify(e));return a.derivation=t[0]+"-",a.gloss=a.gloss+"-",n.derivation="-"+t[1],n.gloss="-"+n.gloss,{prefix:a,suffix:n}}return{error:"The affix "+e.derivation+" contains too many hyphens."}}return{error:"The affix "+e.derivation+" is missing a hyphen."}})),i=function(e,t){return{prefix:t.prefix,lexeme:e,suffix:t.suffix,error:t.error}};return"single base"===a.type?{newWords:function(){for(var e=a.lexemes[Math.floor(Math.random()*a.lexemes.length)],t=[];r>0;){var n=Math.floor(Math.random()*s.length),l=s[n];t.push(i(e,l)),s.splice(n,1),r--}return t}(),possible:n}:"single derivation"===a.type?{newWords:function(){for(var e=s[Math.floor(Math.random()*s.length)],t=[];r>0;){var n=Math.floor(Math.random()*a.lexemes.length),l=a.lexemes[n];t.push(i(l,e)),a.lexemes.splice(n,1),r--}return t}(),possible:n}:{newWords:function(){for(var e=[],t=function t(){for(var n=a.lexemes[Math.floor(Math.random()*a.lexemes.length)],r=s[Math.floor(Math.random()*s.length)],l=i(n,r),o=!0,d=0;d<e.length;d++)if(JSON.stringify(l)===JSON.stringify(e[d])){o=!1;break}return o||(l=t()),l};r>0;)e.push(t()),r--;return e}(),possible:n}},e}()),O=a("Nz3g"),I=a.n(O),J=function(e){var t,a,s,l=e.data,o=null==l||null===(t=l.site)||void 0===t||null===(a=t.siteMetadata)||void 0===a||null===(s=a.toolInfo)||void 0===s?void 0:s.deriv,d=Object(n.useState)(D.getData().words),u=d[0],m=d[1],c=Object(n.useState)(D.getData().type),f=c[0],v=c[1],p=Object(n.useState)(D.getData().lexemes),h=p[0],x=p[1],b=Object(n.useState)(D.getData().derivations),w=b[0],y=b[1],E=Object(n.useState)(D.getData().results),S=E[0],C=E[1];return r.a.createElement(i.a,{toolInfo:o},r.a.createElement(g,{styles:I.a,data:{words:u,type:f,lexemes:h,derivations:w},change:function(e){var t={words:u,type:f,lexemes:h,derivations:w,results:S};if("BUTTON"===e.target.tagName){if(e.preventDefault(),"submit"===e.target.type){var a=D.derive(t);t.results=a,C(a),D.setStorage(t)}else if("save"===e.target.id)D.save(t);else if("Add"===e.target.id.slice(3)){var n=e.target.id.slice(0,3),r=D.add(t,n);x(r.lexemes),y(r.derivations)}else if("c"===e.target.id.slice(1,2)){var s=e.target.id.slice(2),i=e.target.id.slice(0,1),l=D.clear(t,s,i);x(l.lexemes),y(l.derivations)}}else if("file"===e.target.type){e.preventDefault();var o=e.target.files[0];D.open(o,(function(e){e&&(m(e.words),v(e.type),x(e.lexemes),y(e.derivations),C(e.results))}))}else{var d=e.target.id.slice(2),c=e.target.id.slice(0,2),p=e.target.value,g=e.target.name;if("lw"===c||"ld"===c||"da"===c||"dl"===c||"dd"===c){var b=D.changeInput(t,d,c,p);b&&(m(b.words),v(b.type),x(b.lexemes),y(b.derivations),C(b.results))}else if("words"===g){var N=D.wordNumChange(t,p);N&&(m(N.words),v(N.type),x(N.lexemes),y(N.derivations),C(N.results))}else"type"===g&&v(p)}}}),r.a.createElement(N,{styles:I.a,results:S}))};t.default=function(e){var t=Object(s.useStaticQuery)("3097149197");return r.a.createElement(J,Object.assign({},e,{data:t}))}}}]);
//# sourceMappingURL=component---src-pages-deriv-index-js-ac1240960feac420ea81.js.map